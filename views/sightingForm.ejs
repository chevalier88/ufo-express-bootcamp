<!DOCTYPE html>
<html>
  <head>
    <%- include('partials/head', {title: `UFO Sighting Form`, background:
    `https://media0.giphy.com/media/MDrRewbWnLPqnheQ2a/source.gif`}); -%>

    <!-- adapted from https://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_html_attr_set and 
    https://stackoverflow.com/questions/28203140/how-to-make-todays-date-default-value-in-bootstrap-date-input/28203274-->
    <script>
      var today = Date();

      $(document).ready(function () {
        $("#creation_time").attr("value", today);
        $("#submit-button").click(function () {
          $("#creation_time").attr("value", today);
          // var text = $("#text").serialize(); //  Serialize  form  Data
          // $("#div2").text("The  Serialized  values  are  :" + text);

          const message = $("[name = text]").val();
          if (message == "") {
          } else {
            $.ajax({
              url: "/Users/grahamlim/Documents/bootcamp/projects/ufo-express-bootcamp/public/summarizer.py",
              method: "post",
              data: { message_py: message },
              dataType: "text",
              success: function (data) {
                alert(data);
              },
            });
          }
        });
      });
    </script>
  </head>
  <body>
    <%- include('partials/navbar-header', {header: `UFO Sighting Form`,
    subheader: `Submit Your Sighting`}); -%>

    <div class="container" id="form-container" style="max-width: 600px">
      <form action="/sighting" method="POST">
        <div class="form-group">
          <label for="text">What Did You Witness?</label>
          <textarea
            class="form-control"
            id="text"
            rows="3"
            name="text"
            placeholder="Flying otter, omg it's like we're getting invaded halp"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="date_time">Sighting Date & Time</label>
          <div class="input-group date" id="datetimepicker1">
            <input
              type="text"
              class="form-control"
              id="date_time"
              name="date_time"
              placeholder="17/06/1988 12:00 PM"
            />
            <span class="input-group-addon">
              <span class="glyphicon glyphicon-calendar"></span>
            </span>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-sm-6 col-md-6">
            <label for="city">City:</label>
            <input
              type="text"
              class="form-control"
              id="city"
              name="city"
              placeholder="Singapore"
            />
          </div>
          <div class="form-group col-sm-6 col-md-6">
            <label for="state">State (if none, type 'N/A'):</label>
            <input
              type="text"
              class="form-control"
              id="state"
              name="state"
              placeholder="N/A"
            />
          </div>
        </div>
        <div class="row">
          <div class="form-group col-sm-6 col-md-6">
            <label for="shape">UFO Shape (if any):</label>
            <input
              type="text"
              class="form-control"
              id="shape"
              name="shape"
              placeholder="Otter-shaped"
            />
          </div>
          <div class="form-group col-sm-6 col-md-6">
            <label for="duration">Sighting Duration:</label>
            <input
              type="text"
              class="form-control"
              id="duration"
              name="duration"
              placeholder="101 mins"
            />
          </div>
        </div>

        <div class="form-group">
          <label for="summary">Summarize Your Sighting:</label>
          <input
            type="text"
            class="form-control"
            id="summary"
            name="summary"
            placeholder="Otter-shaped vehicle spotted over Jurong"
          />
        </div>
        <div class="row">
          <div class="form-group col-sm-12 col-md-12">
            <label for="creation_time"
              >Report Creation Date & Time (auto-generated):</label
            >
            <input
              type="text"
              class="form-control"
              id="creation_time"
              name="creation_time"
              value=""
            />
          </div>
        </div>
        <div class="col text-center">
          <input
            class="btn btn-primary btn-lg text-center"
            id="submit-button"
            type="submit"
            value="Submit"
          />
        </div>
        <div id="div2"></div>
      </form>
    </div>
    <%- include('partials/footer'); -%>
  </body>
</html>
